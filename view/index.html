<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard de Florería</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>
<body>
    <div id="overlay"></div>
    <div class="dashboard">
        <button id="sidebar-toggle" aria-label="Abrir menú">
            <i class="fas fa-bars"></i>
        </button>
        <nav class="sidebar">
            <button id="sidebar-close" aria-label="Cerrar menú">
                <i class="fas fa-times"></i>
            </button>
            <ul>
                <li><a href="#" data-section="main"><i class="fas fa-home"></i> Panel Principal</a></li>
                <li><a href="#" data-section="floristerias"><i class="fas fa-store"></i> Floristerías</a></li>
                <li><a href="#" data-section="productores"><i class="fas fa-seedling"></i> Productores</a></li>
                <li><a href="#" data-section="subastas"><i class="fas fa-gavel"></i> Subastas</a></li>
                <li><a href="#" data-section="facturas"><i class="fas fa-file-invoice-dollar"></i> Facturas</a></li>
                <li><a href="#" data-section="insertar-datos"><i class="fas fa-plus"></i> Insertar Datos</a></li>
                <li><a href="#" data-section="contratos"><i class="fas fa-file-contract"></i> Contratos</a></li>
                <li><a href="#" data-section="subastadoras"><i class="fas fa-university"></i> Subastadoras</a></li>
            </ul>
        </nav>
        <main class="content">
            <header id="vista-header">
                <h2 id="vista-titulo"></h2>
                <button id="volver-btn" class="volver-btn" style="display: none;">Volver</button>
            </header>
            <section id="main" class="active">
                <div class="cards-container">
                    <div class="cards main-cards">
                        <div class="card main-card" data-section="floristerias">
                            <i class="fas fa-store"></i>
                            <h3>Floristerías</h3>
                        </div>
                        <div class="card main-card" data-section="productores">
                            <i class="fas fa-seedling"></i>
                            <h3>Productores</h3>
                        </div>
                        <div class="card main-card" data-section="subastas">
                            <i class="fas fa-gavel"></i>
                            <h3>Subastas</h3>
                        </div>
                        <div class="card main-card" data-section="facturas">
                            <i class="fas fa-file-invoice-dollar"></i>
                            <h3>Facturas</h3>
                        </div>
                    </div>
                </div>
            </section>
            <section id="floristerias">
                <h2>Floristerías</h2>
                <div class="filters">
                    <input type="text" id="filtro-nombre-floristerias" placeholder="Filtrar por nombre">
                    <select id="filtro-pais-floristerias">
                        <option value="">Todos los países</option>
                        <!-- Opciones de países se generarán dinámicamente -->
                    </select>
                    <button id="aplicar-filtro-floristerias">Aplicar Filtro</button>
                    <span id="fecha-hoy-floristerias"></span>
                </div>
                <div class="cards-container">
                    <div class="cards"></div>
                </div>
            </section>
            <section id="productores">
                <h2>Productoras</h2>
                <div class="filters">
                    <input type="text" id="filtro-nombre-productoras" placeholder="Filtrar por nombre">
                    <select id="filtro-pais-productoras">
                        <option value="">Todos los países</option>
                        <!-- Opciones de países se generarán dinámicamente -->
                    </select>
                    <button id="aplicar-filtro-productoras">Aplicar Filtro</button>
                    <span id="fecha-hoy-productoras"></span>
                </div>
                <div class="cards-container">
                    <div class="cards"></div>
                </div>
            </section>
            <section id="subastas">
                <h2>Subastas</h2>
                <div class="filters">
                    <select id="filtro-productor-subastas">
                        <option value="">Todos los productores</option>
                        <!-- Opciones de productores se generarán dinámicamente -->
                    </select>
                    <select id="filtro-floristeria-subastas">
                        <option value="">Todas las floristerías</option>
                        <!-- Opciones de floristerías se generarán dinámicamente -->
                    </select>
                    <select id="filtro-subastadora-subastas">
                        <option value="">Todas las subastadoras</option>
                        <!-- Opciones de subastadoras se generarán dinámicamente -->
                    </select>
                    <input type="date" id="filtro-fecha-subastas">
                    <select id="ordenar-monto-subastas">
                        <option value="asc">Monto: Menor a Mayor</option>
                        <option value="desc">Monto: Mayor a Menor</option>
                    </select>
                    <button id="aplicar-filtro-subastas">Aplicar Filtro</button>
                </div>
                <div class="cards-container">
                    <div class="cards"></div>
                </div>
            </section>
            <section id="facturas">
                <div class="filters">
                    <input type="text" id="clienteFilter" placeholder="Filtrar por cliente">
                    <input type="date" id="fechaFilter">
                    <button id="aplicarFiltro">Aplicar Filtro</button>
                </div>
                <div class="cards-container">
                    <div class="cards">
                        <!-- Tarjeta de factura de prueba -->
                        <div class="card" onclick="mostrarDetallesFactura(facturaPrueba)">
                            <h3>Factura #12345</h3>
                            <p>Subastadora: Subastadora Ejemplo</p>
                            <p>Floristería: Floristeria Ejemplo</p>
                            <p>Fecha: 2023-10-01</p>
                            <p>Monto: €500.00</p>
                        </div>
                    </div>
                </div>
            </section>
            <section id="detalles-factura">
                <div id="detalles-factura-info">
                    <div class="factura-info">
                        <div class="factura-subastadora">
                            <h3 id="subastadora-nombre"></h3>
                            <p id="subastadora-contacto"></p>
                        </div>
                        <table class="factura-fecha-numero">
                            <tr>
                                <th>Num Factura</th>
                                <th>Fecha</th>
                            </tr>
                            <tr>
                                <td id="factura-numero"></td>
                                <td id="factura-fecha"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="factura-floristeria">
                        <h3>Facturar A:</h3>
                        <div class="factura-floristeria-info">
                            <p id="floristeria-nombre"></p>
                            <p id="floristeria-contacto"></p>
                            <p id="floristeria-email"></p>
                        </div>
                    </div>
                    <table id="factura-lotes">
                        <thead>
                            <tr>
                                <th>Número de Lote</th>
                                <th>Descripción</th>
                                <th>Precio Final</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Los detalles de los lotes se generarán dinámicamente -->
                        </tbody>
                    </table>
                    <div class="factura-resumen">
                        <table class="factura-comentarios">
                            <tr>
                                <th>Comentarios</th>
                            </tr>
                            <tr>
                                <td id="factura-envio"></td>
                            </tr>
                        </table>
                        <div class="factura-totales">
                            <p id="factura-subtotal"></p>
                            <p id="factura-recargo-envio"></p>
                            <h3 id="factura-total"></h3>
                        </div>
                    </div>
                </div>
            </section>
            <section id="detalles">
                <h2 id="detalles-titulo"></h2>
                <div id="detalles-info"></div>
                <div id="catalogo-flores" class="cards-container">
                    <div class="cards"></div>
                </div>
            </section>
            <section id="insertar-datos">
                <h2>Insertar Datos</h2>
                <nav class="submenu">
                    <ul>
                        <li><a href="#" data-section="capturar-lote">Capturar Lote</a></li>
                        <li><a href="#" data-section="capturar-factura">Capturar Factura</a></li>
                        <li><a href="#" data-section="capturar-afiliacion">Capturar Afiliación</a></li>
                        <li><a href="#" data-section="capturar-catalogo-floristeria">Capturar Catálogo Floristería</a></li>
                        <li><a href="#" data-section="capturar-bouquet">Capturar Bouquet</a></li>
                        <li><a href="#" data-section="capturar-historico-precio">Capturar Histórico Precio</a></li>
                    </ul>
                </nav>
                <!-- Forms for each capture type -->
                <div class="capturar-form" id="capturar-lote-form">
                    <form action="/insert-lote" method="post" class="formulario-insertar">
                        <label for="idCantidadContratoSubastadora">ID Cantidad Contrato Subastadora:</label>
                        <input type="number" id="idCantidadContratoSubastadora" name="idCantidadContratoSubastadora" required><br><br>
                        
                        <label for="idCantidadContratoProductora">ID Cantidad Contrato Productora:</label>
                        <input type="number" id="idCantidadContratoProductora" name="idCantidadContratoProductora" required><br><br>
                        
                        <label for="idCantidad_NContrato">ID Cantidad N Contrato:</label>
                        <input type="number" id="idCantidad_NContrato" name="idCantidad_NContrato" required><br><br>
                        
                        <label for="idCantidadCatalogoProductora">ID Cantidad Catálogo Productora:</label>
                        <input type="number" id="idCantidadCatalogoProductora" name="idCantidadCatalogoProductora" required><br><br>
                        
                        <label for="idCantidadCorte">ID Cantidad Corte:</label>
                        <input type="number" id="idCantidadCorte" name="idCantidadCorte" required><br><br>
                        
                        <label for="idCantidadvnb">ID Cantidad VNB:</label>
                        <input type="number" id="idCantidadvnb" name="idCantidadvnb" required><br><br>
                        
                        <label for="NumLote">Número de Lote:</label>
                        <input type="number" id="NumLote" name="NumLote" required><br><br>
                        
                        <label for="bi">BI:</label>
                        <input type="number" id="bi" name="bi" required><br><br>
                        
                        <label for="cantidad">Cantidad:</label>
                        <input type="number" id="cantidad" name="cantidad" required><br><br>
                        
                        <label for="precioInicial">Precio Inicial:</label>
                        <input type="number" step="0.01" id="precioInicial" name="precioInicial" required><br><br>
                        
                        <label for="precioFinal">Precio Final:</label>
                        <input type="number" step="0.01" id="precioFinal" name="precioFinal" required><br><br>
                        
                        <label for="idFactura">ID Factura:</label>
                        <input type="number" id="idFactura" name="idFactura" required><br><br>
                        
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <!-- Form for Capturar Factura -->
                <div class="capturar-form" id="capturar-factura-form">
                    <form action="/insert-factura" method="post" class="formulario-insertar">
                        <label for="facturaId">Factura ID:</label>
                        <input type="number" id="facturaId" name="facturaId" required><br><br>
                        
                        <label for="idAfiliacionFloristeria">ID Afiliación Floristería:</label>
                        <input type="number" id="idAfiliacionFloristeria" name="idAfiliacionFloristeria" required><br><br>
                        
                        <label for="idAfiliacionSubastadora">ID Afiliación Subastadora:</label>
                        <input type="number" id="idAfiliacionSubastadora" name="idAfiliacionSubastadora" required><br><br>
                        
                        <label for="fechaEmision">Fecha Emisión:</label>
                        <input type="date" id="fechaEmision" name="fechaEmision" required><br><br>
                        
                        <label for="montoTotal">Monto Total:</label>
                        <input type="number" step="0.01" id="montoTotal" name="montoTotal" required><br><br>
                        
                        <label for="numeroEnvio">Número Envío:</label>
                        <input type="text" id="numeroEnvio" name="numeroEnvio" required><br><br>
                        
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <!-- Form for Capturar Afiliación -->
                <div class="capturar-form" id="capturar-afiliacion-form">
                    <form action="/insert-afiliacion" method="post" class="formulario-insertar">
                        <label for="idFloristeria">ID Floristería:</label>
                        <input type="number" id="idFloristeria" name="idFloristeria" required><br><br>
                        
                        <label for="idSubastadora">ID Subastadora:</label>
                        <input type="number" id="idSubastadora" name="idSubastadora" required><br><br>
                        
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <!-- Form for Capturar Catálogo Floristería -->
                <div class="capturar-form" id="capturar-catalogo-floristeria-form">
                    <form action="/insert-catalogo-floristeria" method="post" class="formulario-insertar">
                        <label for="idFloristeria">ID Floristería:</label>
                        <input type="number" id="idFloristeria" name="idFloristeria" required><br><br>
                        
                        <label for="codigo">Código:</label>
                        <input type="text" id="codigo" name="codigo" required><br><br>
                        
                        <label for="idCorteFlor">ID Corte Flor:</label>
                        <input type="number" id="idCorteFlor" name="idCorteFlor" required><br><br>
                        
                        <label for="idColor">ID Color:</label>
                        <input type="number" id="idColor" name="idColor" required><br><br>
                        
                        <label for="nombrePropio">Nombre Propio:</label>
                        <input type="text" id="nombrePropio" name="nombrePropio" required><br><br>
                        
                        <label for="descripcion">Descripción:</label>
                        <textarea id="descripcion" name="descripcion" required></textarea><br><br>
                        
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <!-- Form for Capturar Detalle Bouquet -->
                <div class="capturar-form" id="capturar-bouquet-form">
                    <form action="/insert-detalle-bouquet" method="post" class="formulario-insertar">
                        <label for="idCatalogoFloristeria">ID Catalogo Floristería:</label>
                        <input type="number" id="idCatalogoFloristeria" name="idCatalogoFloristeria" required><br><br>
                        
                        <label for="idCatalogoCodigo">ID Catalogo Código:</label>
                        <input type="text" id="idCatalogoCodigo" name="idCatalogoCodigo" required><br><br>
                        
                        <label for="bouquetId">Bouquet ID:</label>
                        <input type="number" id="bouquetId" name="bouquetId" required><br><br>
                        
                        <label for="cantidad">Cantidad:</label>
                        <input type="number" id="cantidad" name="cantidad" required><br><br>
                        
                        <label for="talloTamano">Tamaño Tallo:</label>
                        <input type="number" id="talloTamano" name="talloTamano" required><br><br>
                        
                        <label for="descripcion">Descripción:</label>
                        <textarea id="descripcion" name="descripcion" required></textarea><br><br>
                        
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <!-- Form for Capturar Histórico Precio -->
                <div class="capturar-form" id="capturar-historico-precio-form">
                    <form action="/insert-historico-precio" method="post" class="formulario-insertar">
                        <label for="idCatalogoFloristeria">ID Catalogo Floristería:</label>
                        <input type="number" id="idCatalogoFloristeria" name="idCatalogoFloristeria" required><br><br>
                        
                        <label for="idCatalogoCodigo">ID Catalogo Código:</label>
                        <input type="text" id="idCatalogoCodigo" name="idCatalogoCodigo" required><br><br>
                        
                        <label for="fechaInicio">Fecha Inicio:</label>
                        <input type="date" id="fechaInicio" name="fechaInicio" required><br><br>
                        
                        <label for="fechaFin">Fecha Fin:</label>
                        <input type="date" id="fechaFin" name="fechaFin"><br><br>
                        
                        <label for="precio">Precio:</label>
                        <input type="number" step="0.01" id="precio" name="precio" required><br><br>
                        
                        <label for="tamanoTallo">Tamaño Tallo:</label>
                        <input type="number" id="tamanoTallo" name="tamanoTallo" required><br><br>
                        
                        <input type="submit" value="Submit">
                    </form>
                </div>
                <!-- ...additional forms for other capture types (hidden by default)... -->
            </section>
            <!-- Sección Contratos -->
            <section id="contratos">
                <h2>Contratos</h2>
                <div class="filters">
                    <select id="productoraSelect">
                        <option value="">Seleccione una productora</option>
                    </select>
                </div>
                <div class="buttons-container">
                    <button class="btn-azul" id="agregarContratoBtn"><i class="fas fa-plus"></i> Agregar Contrato</button>
                    <button class="btn-azul" id="renovarContratoBtn"><i class="fas fa-sync-alt"></i> Renovar Contrato</button>
                    <button class="btn-azul" id="registrarPagoBtn"><i class="fas fa-dollar-sign"></i> Registrar Pago</button>
                </div>
                <div class="cards-container">
                    <table id="tablaContratos" class="styled-table">
                        <thead>
                            <tr>
                                <th>Número de Contrato</th>
                                <th>ID Subastadora</th>
                                <th>Fecha de Emisión</th>
                                <th>Porcentaje de Producción</th>
                                <th>Tipo de Productor</th>
                                <th>Estado</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>
            
            <!-- Modal Agregar Contrato -->
            <div id="modalAgregarContrato" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Agregar Contrato</h2>
                    <!-- Formulario para agregar contrato -->
                    <form id="formAgregarContrato">
                        <!-- Campos del formulario -->
                    </form>
                </div>
            </div>
            
            <!-- Modal Renovar Contrato -->
            <div id="modalRenovarContrato" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Renovar Contrato</h2>
                    <!-- Formulario para renovar contrato -->
                    <form id="formRenovarContrato">
                        <!-- Campos del formulario -->
                    </form>
                </div>
            </div>
            
            <!-- Modal Registrar Pago -->
            <div id="modalRegistrarPago" class="modal">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Registrar Pago</h2>
                    <!-- Formulario para registrar pago -->
                    <form id="formRegistrarPago">
                        <!-- Campos del formulario -->
                    </form>
                </div>
            </div>

            <!-- Sección Subastadoras -->
            <section id="subastadoras">
                <h2>Subastadoras</h2>
                <div class="cards-container">
                    <div class="cards" id="subastadoras-cards">
                        <!-- Se llenará dinámicamente -->
                    </div>
                </div>
                <div id="subastadora-detalle">
                    <!-- Detalle al hacer clic -->
                </div>
            </section>
        </main>
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>
    <script type="module" src="./productoras.js"></script>
    <script type="module" src="./floristerias.js"></script>
    <script type="module" src="./subastas.js"></script>
    <script type="module" src="./facturas.js"></script>
    <script type="module" src="./utils.js"></script>
    <script type="module" src="./script.js"></script>
</body>
</html>